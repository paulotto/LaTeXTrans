\begin{abstract}
Despite domain generalization (DG) has significantly addressed the performance degradation of pre-trained models caused by domain shifts, it often falls short in real-world deployment. Test-time adaptation (TTA), which adjusts a learned model using unlabeled test data, presents a promising solution. However, most existing TTA methods struggle to deliver strong performance in medical image segmentation, primarily because they overlook the crucial prior knowledge inherent to medical images. To address this challenge, we incorporate morphological information and propose a framework based on multi-graph matching. 
% This framework utilizes cycle-consistency to help the model capture the invariant priors of unseen data more effectively. 
% Specifically, we introduce universe embeddings that embed geometric priors, along with novel unsupervised multi-matching paradigms for both training and testing. 
Specifically, we introduce learnable universe embeddings that integrate morphological priors during multi-source training, along with novel unsupervised test-time paradigms for domain adaptation. This approach guarantees cycle-consistency in multi-matching while enabling the model to more effectively capture the invariant priors of unseen data, significantly mitigating the effects of domain shifts.
% This approach enhances cross-domain consistency, significantly reducing the impact of domain shifts.
Extensive experiments demonstrate that our method outperforms other state-of-the-art approaches on two medical image segmentation benchmarks for both multi-source and single-source domain generalization tasks. 
% We will make all codes publicly available.
The source code is available at 
\href{https://github.com/Yore0/TTDG-MGM}
{https://github.com/Yore0/TTDG-MGM}.
\end{abstract}

\renewcommand{\thefootnote}{\fnsymbol{footnote}}
% \footnotetext[1]{Equal Contribution.}
\footnotetext[2]{Corresponding authors.}